<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Button Press App</title>
    <style>
        /* Add your CSS styles here */
        .button-row {
            display: flex;
            align-items: center;
        }
        .button {
            font-size: 16px;
            padding: 10px 20px;
            margin: 10px;
        }
        #copy-button {
            font-size: 16px;
            padding: 10px 20px;
            margin: 10px;
        }
        #clear-button {
            font-size: 16px;
            margin: 10px;
            background-color: #f88;
        }
        #log-container {
            font-family: monospace, monospace;
            font-size: 14px;
            padding: 10px 10px;
            margin: 10px;
            max-width: 260px;
            border-style: solid;
        }
    </style>
</head>
<body>
    <div class="button-row">
        <button class="button">Up</button>
        <button class="button">Down</button>
        <span>Type 1</span>
    </div>
    <div class="button-row">
        <button class="button">Up</button>
        <button class="button">Down</button>
        <span>Type 2</span>
    </div>
    <div class="button-row">
        <button class="button">Up</button>
        <button class="button">Down</button>
        <span>Type 3</span>
    </div>
    <div class="button-row">
        <button class="button">Up</button>
        <button class="button">Down</button>
        <span>Type 4</span>
    </div>
    <div id="log-container"></div>
    <button id="copy-button">Copy to clipboard</button>
    <button id="clear-button">Clear Log</button>

    <script>
        function getCookie(cookieName, emptyValue) {
          const cookies = document.cookie.split(';');
          for (const cookie of cookies) {
            const [name, value] = cookie.trim().split('=');
            if (name === cookieName) {
              return value; // Cookie exists
            }
          }
          return emptyValue; // Cookie does not exist
        }

        // Convert the stringified array back to an actual array
        const log = JSON.parse(getCookie('button_log', '[]'));

        function handleButtonClick(direction, type) {
            const timestamp = new Date().toLocaleTimeString();
            log.push({ timestamp, direction, type });
            console.log(`[${timestamp}] ${direction} (${type})`);
            updateLogDisplay();
            saveLogToCookie();
        }

        function updateLogDisplay() {
            const logContainer = document.getElementById('log-container');
            logContainer.innerHTML = '';
            log.forEach(entry => {
                const logEntry = document.createElement('div');
                logEntry.textContent = `[${entry.timestamp}] ${entry.direction} (${entry.type})\n`;
                logContainer.appendChild(logEntry);
            });
        }

        function saveLogToCookie() {
            const cookieValue = JSON.stringify(log);
            document.cookie = `button_log=${cookieValue}; max-age=31536000; path=/`;
        }

        function copyLog() {
            const logContainer = document.getElementById('log-container');
            navigator.clipboard.writeText(logContainer.textContent);
        }

        function clearCookie() {
            if (confirm('Are you sure you want to clear the log (cookies will be cleared)?')) {
                document.cookie = 'button_log=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;';
                log.length = 0;
                updateLogDisplay();
            }
        }

        for (const button of document.getElementsByClassName('button')) {
            button.addEventListener(
                'click',
                () => handleButtonClick(
                    button.textContent,
                    button.parentElement.getElementsByTagName('span')[0].textContent
                    )
                );
        }

        document.getElementById('copy-button').addEventListener('click', copyLog);
        document.getElementById('clear-button').addEventListener('click', clearCookie);

        updateLogDisplay();
    </script>
</body>
</html>
